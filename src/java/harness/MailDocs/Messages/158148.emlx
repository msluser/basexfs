10718
Return-Path: <fuse-devel-bounces@lists.sourceforge.net>
Received: from uni-konstanz.de ([unix socket])
	 by uni-konstanz.de (Cyrus v2.3.16) with LMTPA;
	 Tue, 12 Jul 2011 17:10:17 +0200
X-Sieve: CMU Sieve 2.3
Received: from pyrimidin.rz.uni-konstanz.de (pyrimidin.rz.uni-konstanz.de [134.34.240.46])
	by uni-konstanz.de (Postfix) with ESMTP id DBE87125A1
	for <alexander.holupirek@uni-konstanz.de>; Tue, 12 Jul 2011 17:10:17 +0200 (CEST)
Received: from titan01.inf.uni-konstanz.de ([134.34.57.71])
  by unitis.rz.uni-konstanz.de with ESMTP; 12 Jul 2011 15:10:18 +0000
Received: by titan01.inf.uni-konstanz.de (INF MTA)
	id BB2B54D9D2; Tue, 12 Jul 2011 17:10:17 +0200 (CEST)
Delivered-To: holupire@inf.uni-konstanz.de
Received: from purin.rz.uni-konstanz.de (purin.rz.uni-konstanz.de [134.34.240.45])
	by titan01.inf.uni-konstanz.de (INF MTA) with ESMTP id A73ED4D9BF
	for <holupire@inf.uni-konstanz.de>; Tue, 12 Jul 2011 17:10:17 +0200 (CEST)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AiQAADNjHE7YIrVYkWdsb2JhbABTl3IPjy0UAQEBAQkLCwcUBSCIegKxZIcWiSiGOgSHIi+JAIcKJoQ1hxE
Received: from lists.sourceforge.net ([216.34.181.88])
  by mailin.uni-konstanz.de with ESMTP; 12 Jul 2011 15:10:16 +0000
Received: from localhost ([127.0.0.1] helo=sfs-ml-4.v29.ch3.sourceforge.com)
	by sfs-ml-4.v29.ch3.sourceforge.com with esmtp (Exim 4.76)
	(envelope-from <fuse-devel-bounces@lists.sourceforge.net>)
	id 1QgeZV-0005C8-HV; Tue, 12 Jul 2011 15:08:25 +0000
Received: from sog-mx-4.v43.ch3.sourceforge.com ([172.29.43.194]
	helo=mx.sourceforge.net)
	by sfs-ml-4.v29.ch3.sourceforge.com with esmtp (Exim 4.76)
	(envelope-from <pa4wdh@yahoo.com>) id 1QgeZT-0005C2-Eh
	for fuse-devel@lists.sourceforge.net; Tue, 12 Jul 2011 15:08:23 +0000
X-ACL-Warn: 
Received: from nm21.bullet.mail.sp2.yahoo.com ([98.139.91.91])
	by sog-mx-4.v43.ch3.sourceforge.com with smtp (Exim 4.76)
	id 1QgeZS-00089v-BL
	for fuse-devel@lists.sourceforge.net; Tue, 12 Jul 2011 15:08:23 +0000
Received: from [98.139.91.64] by nm21.bullet.mail.sp2.yahoo.com with NNFMP;
	12 Jul 2011 15:08:16 -0000
Received: from [98.139.91.22] by tm4.bullet.mail.sp2.yahoo.com with NNFMP;
	12 Jul 2011 15:08:16 -0000
Received: from [127.0.0.1] by omp1022.mail.sp2.yahoo.com with NNFMP;
	12 Jul 2011 15:08:16 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 688885.48520.bm@omp1022.mail.sp2.yahoo.com
Received: (qmail 91962 invoked by uid 60001); 12 Jul 2011 15:08:16 -0000
X-YMail-OSG: aIzegQMVM1moSx8mfD_9YCe4DLq273vOlPuoMfNdFVUUkLv
	RnFJ80sSwKhMoImsekxLA0TZpf_B5hgsQ5XfRlhuK5J0r3Dncxldys2iPLlQ
	pK85C2RE90X9D456RjEv1_TUATZv4Q_NK_UIZhXpJcSMF1CWL0xbKjB42Wqa
	i0lEY1LNQXicGijq0t07i1aRdEYpJiJ51LE8Xn8c83F9ole9ePtE_Zsl1UP1
	0J3EK2vrMAX1oNQrVBVybdR8Rrh9h4adqmENKYd15GUNTZa5XD7PVpRqENOy
	8kpbyV6JJv0VldY.zSCTLfCbZTyqFURvoq2Qz5TI0Rj3Tu_ovvkz76jb3U8b
	ZDxO.M52CebQqTHkTVpqSj7iDRrspu3_AHFDgJjkKDFBoW2IlPvhPpfP7TP.
	HtIbtxv17E5rps3DlYyINsUCsDUoO68dbORVUSSs7sXVtWuJ1xOv.T0fVsWl
	D1eWOagSXrUIApadUBUNj
Received: from [213.84.93.147] by web39409.mail.mud.yahoo.com via HTTP;
	Tue, 12 Jul 2011 08:08:16 PDT
X-Mailer: YahooMailClassic/14.0.3 YahooMailWebService/0.8.112.307740
Message-ID: <1310483296.78108.YahooMailClassic@web39409.mail.mud.yahoo.com>
Date: Tue, 12 Jul 2011 08:08:16 -0700 (PDT)
From: Wesley PA4WDH <pa4wdh@yahoo.com>
To: fuse-devel@lists.sourceforge.net
In-Reply-To: <1310464995.24019.YahooMailClassic@web39410.mail.mud.yahoo.com>
MIME-Version: 1.0
X-Spam-Score: -0.1 (/)
X-Spam-Report: Spam Filtering performed by mx.sourceforge.net.
	See http://spamassassin.org/tag/ for more details.
	-0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/,
	no trust [98.139.91.91 listed in list.dnswl.org]
	0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
	(pa4wdh[at]yahoo.com)
	-0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
	domain
	-0.1 DKIM_VALID_AU Message has a valid DKIM or DK signature from
	author's domain
	0.1 DKIM_SIGNED            Message has a DKIM or DK signature,
	not necessarily valid
	-0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
	0.0 T_TO_NO_BRKTS_FREEMAIL To: misformatted and free email service
X-Headers-End: 1QgeZS-00089v-BL
Subject: Re: [fuse-devel] Understanding debug output
X-BeenThere: fuse-devel@lists.sourceforge.net
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: <fuse-devel.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/listinfo/fuse-devel>,
	<mailto:fuse-devel-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=fuse-devel>
List-Post: <mailto:fuse-devel@lists.sourceforge.net>
List-Help: <mailto:fuse-devel-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/fuse-devel>,
	<mailto:fuse-devel-request@lists.sourceforge.net?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Errors-To: fuse-devel-bounces@lists.sourceforge.net

Hi Stef and Nikolaus,

Thanks again for your help, but the problem was not really fuse related (al=
though i don't really understand why it triggered at the point where it did=
), but it's solved.

I won't go into details of the non fuse related parts, but the problem was =
that i was allocating 2 bytes less than i actually wanted and needed to do.
I think it's a classic mistake:
I did: pointer=3Dmalloc(strlen(array[index]+1));
While i actually wanted to do: pointer=3Dmalloc(strlen(array[index])+1);
Where the +1 was of course for the terminating null character, but what i a=
ctually did was making the string a character shorter by starting at it's s=
econd character :-(
I think this actually screwed up some pointers in the struct when i started=
 using the memory i *thought* i had allocated.

Thanks for your help.

Best regards,
Wesley


--- On Tue, 7/12/11, Wesley PA4WDH <pa4wdh@yahoo.com> wrote:

> From: Wesley PA4WDH <pa4wdh@yahoo.com>
> Subject: Re: [fuse-devel] Understanding debug output
> To: fuse-devel@lists.sourceforge.net
> Date: Tuesday, July 12, 2011, 12:03 PM
> Hi Stef,
> =

> Thanks for your answer. I'm aware of malloc and i'm using
> it more than is good for me :-)
> However, i don't understand how i can get a malloc error
> from a function that only uses a return;.
> =

> For your information:
> "simread" is the name of my program, because when i started
> it was used to ... well ... read sim cards :-) The FUSE
> calls have been named with a scfs_ prefix (SmartCardFS), so
> scfs_read, scfs_readdir, etc. They use memory structures
> filled by the rest of the program.
> =

> Best regards,
> Wesley
> =

> =

> =

> --- On Tue, 7/12/11, Stef Bon <stefbon@gmail.com>
> wrote:
> =

> > From: Stef Bon <stefbon@gmail.com>
> > Subject: Re: [fuse-devel] Understanding debug output
> > To: "Wesley PA4WDH" <pa4wdh@yahoo.com>
> > Cc: fuse-devel@lists.sourceforge.net
> > Date: Tuesday, July 12, 2011, 11:49 AM
> > Hi Wesley,
> > =

> > the init function is always called first, before any
> other
> > call. See:
> > =

> > http://fuse.sourceforge.net/doxygen/structfuse__lowlevel__ops.html#b6fa=
0b9edb5b002cd1502c969c887329
> > =

> > so yes it's processing your init function.
> > =

> > About the malloc function, this has anything to dio
> with
> > memory
> > allocation. Every program needs this.
> > So you're program is using this also.
> > =

> > If you want to have more debug info, build in some
> > functions in your fs like:
> > =

> > syslog(LOG_DEBUG, "message....")
> > =

> > the syntax is simular like that of sprintf.
> > =

> > Is your fs sot somehwere calling simread?? it should.
> > Somewhere in main?
> > =

> > Stef
> > =

> > 2011/7/12 Wesley PA4WDH <pa4wdh@yahoo.com>:
> > > Hi All,
> > >
> > > I got my FS to run in debug mode, but now i
> don't
> > really understand the debug output :-)
> > >
> > > The output (just before a it exist unexpectedly)
> is:
> > > FUSE library version: 2.8.5
> > > nullpath_ok: 0
> > > unique: 1, opcode: INIT (26), nodeid: 0, insize:
> 56
> > > simread: malloc.c:3097: sYSMALLOc: Assertion
> `(old_top
> > =3D=3D (((mbinptr) (((char *) &((av)->bins[((1) -
> 1) *
> > 2])) - __builtin_offsetof (struct malloc_chunk,
> fd))))
> > && old_size =3D=3D 0) || ((unsigned long)
> (old_size)
> > >=3D (unsigned long)((((__builtin_offsetof (struct
> > malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) -
> 1))
> > & ~((2 * (sizeof(size_t))) - 1))) &&
> > ((old_top)->size & 0x1) && ((unsigned
> > long)old_end & pagemask) =3D=3D 0)' failed.
> > > Aborted
> > >
> > > Does "opcode: INIT" mean it's running my init
> function
> > ?
> > > What i don't really understand is the malloc
> error,
> > because my init function does not use malloc:
> > >
> > > void *scfs_init(struct fuse_conn_info *conn)
> > > {
> > > =A0return NULL;
> > > }
> > >
> > > Do you have any clues ?
> > >
> > > Thanks in advance.
> > >
> > > Best regards,
> > > Wesley
> > >
> > >
> >
> -------------------------------------------------------------------------=
-----
> > > All of the data generated in your IT
> infrastructure is
> > seriously valuable.
> > > Why? It contains a definitive record of
> application
> > performance, security
> > > threats, fraudulent activity, and more. Splunk
> takes
> > this data and makes
> > > sense of it. IT sense. And common sense.
> > > http://p.sf.net/sfu/splunk-d2d-c2
> > > _______________________________________________
> > > fuse-devel mailing list
> > > fuse-devel@lists.sourceforge.net
> > > https://lists.sourceforge.net/lists/listinfo/fuse-devel
> > >
> > =

> =

> -------------------------------------------------------------------------=
-----
> All of the data generated in your IT infrastructure is
> seriously valuable.
> Why? It contains a definitive record of application
> performance, security =

> threats, fraudulent activity, and more. Splunk takes this
> data and makes =

> sense of it. IT sense. And common sense.
> http://p.sf.net/sfu/splunk-d2d-c2
> _______________________________________________
> fuse-devel mailing list
> fuse-devel@lists.sourceforge.net
> https://lists.sourceforge.net/lists/listinfo/fuse-devel
> =


---------------------------------------------------------------------------=
---
All of the data generated in your IT infrastructure is seriously valuable.
Why? It contains a definitive record of application performance, security =

threats, fraudulent activity, and more. Splunk takes this data and makes =

sense of it. IT sense. And common sense.
http://p.sf.net/sfu/splunk-d2d-c2
_______________________________________________
fuse-devel mailing list
fuse-devel@lists.sourceforge.net
https://lists.sourceforge.net/lists/listinfo/fuse-devel
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>color</key>
	<string>000000</string>
	<key>date-sent</key>
	<real>1310483296</real>
	<key>flags</key>
	<integer>261248</integer>
	<key>original-mailbox</key>
	<string>imap://alexander.holupirek@popserver.uni-konstanz.de/INBOX</string>
	<key>sender</key>
	<string>Wesley PA4WDH &lt;pa4wdh@yahoo.com&gt;</string>
	<key>subject</key>
	<string>Re: [fuse-devel] Understanding debug output</string>
	<key>to</key>
	<string>fuse-devel@lists.sourceforge.net</string>
</dict>
</plist>
